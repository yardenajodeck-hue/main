<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>CFD Demo ‚Äî Plataforma Educativa</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header>
      <h1>CFD ‚Äî Plataforma Educativa Interactiva</h1>
      <p>Aprende Din√°mica de Fluidos Computacional con herramientas interactivas</p>
    </header>

    <main>
      <!-- BARRA DE CAP√çTULOS -->
      <nav class="chapters-nav">
        <button class="chapter-btn active" data-chapter="intro">Intro</button>
        <button class="chapter-btn" data-chapter="equations">Ecuaciones CFD</button>
        <button class="chapter-btn" data-chapter="discretization">Discretizaci√≥n</button>
        <button class="chapter-btn" data-chapter="timeint">Integraci√≥n Temporal</button>
        <button class="chapter-btn" data-chapter="meshes">Mallas</button>
        <button class="chapter-btn" data-chapter="solvers">Solucionadores</button>
        <button class="chapter-btn" data-chapter="solutions">Solutions algorithms</button>
        <button class="chapter-btn" data-chapter="visualization">Visualizaci√≥n</button>
        <button class="chapter-btn" data-chapter="tools">Herramientas</button>
      </nav>

      <!-- CONTENIDO POR CAP√çTULO -->
      <div class="chapters-container">

        <!-- INTRO -->
        <section id="intro" class="chapter active">
          <h2>Introducci√≥n a CFD</h2>
          <div class="chapter-content">
            <div class="chapter-grid">
              <div class="chapter-card">
                <h3>¬øQu√© es CFD?</h3>
                <p>CFD (Computational Fluid Dynamics) es la simulaci√≥n num√©rica de fluidos. Resuelve ecuaciones de Navier-Stokes usando m√©todos num√©ricos en computadoras.</p>
                <ul>
                  <li>Modela flujo de aire, agua, gases</li>
                  <li>Predice campos de velocidad, presi√≥n, temperatura</li>
                  <li>Se usa en ingenier√≠a aeroespacial, automoci√≥n, energ√≠a</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Flujo Interactivo 2D</h3>
                <p>Ajusta par√°metros y observa el comportamiento del flujo en tiempo real:</p>
                <div class="controls">
                  <label>Tipo de campo:
                    <select id="fieldType">
                      <option value="vortex">V√≥rtice</option>
                      <option value="shear">Cizalla</option>
                      <option value="source">Fuente/Sumidero</option>
                    </select>
                  </label>
                  <label>Intensidad:
                    <input id="strength" type="range" min="0" max="4" step="0.01" value="1" />
                  </label>
                  <button id="resetBtn">Reiniciar</button>
                </div>
                <canvas id="flowCanvas" style="width:100%;height:350px;background:rgba(5,8,16,0.4);border-radius:6px;margin-top:8px;"></canvas>
              </div>
            </div>
          </div>
        </section>

        <!-- ECUACIONES CFD -->
        <section id="equations" class="chapter">
          <h2>Ecuaciones de Conservaci√≥n</h2>
          <div class="chapter-content">
            <div class="chapter-grid">
              <div class="chapter-card">
                <h3>Ecuaci√≥n de Continuidad (Masa)</h3>
                <p>Expresa la conservaci√≥n de masa en un volumen de control:</p>
                <code>‚àÇœÅ/‚àÇt + ‚àá¬∑(œÅu) = 0</code>
                <p><strong>Significado:</strong> La masa no se crea ni se destruye; lo que entra menos lo que sale equals cambio temporal.</p>
              </div>

              <div class="chapter-card">
                <h3>Ecuaciones de Momentum (Impulso)</h3>
                <p>Describe c√≥mo cambia la velocidad del fluido (2¬™ ley de Newton):</p>
                <code>‚àÇ(œÅu)/‚àÇt + ‚àá¬∑(œÅu‚äóu) = -‚àáp + ‚àá¬∑œÑ + f</code>
                <p>Relaciona: fuerzas (presi√≥n, viscosidad) con aceleraci√≥n del fluido.</p>
              </div>

              <div class="chapter-card">
                <h3>Ecuaci√≥n de Energ√≠a</h3>
                <p>Conservaci√≥n de energ√≠a total (t√©rmica + cin√©tica):</p>
                <code>‚àÇ(œÅE)/‚àÇt + ‚àá¬∑(œÅEu) = ‚àá¬∑(k‚àáT) + ‚àá¬∑(œÑ¬∑u) + f¬∑u + Q</code>
                <p>Incluye: conducci√≥n t√©rmica, disipaci√≥n viscosa, fuentes externas.</p>
              </div>

              <div class="chapter-card">
                <h3>N√∫mero de Reynolds</h3>
                <p>Determina si el flujo es laminar o turbulento:</p>
                <label>Calcular Re:
                  <input id="re-u" type="number" placeholder="Velocidad u (m/s)" value="1" min="0.01" />
                  <input id="re-L" type="number" placeholder="Longitud L (m)" value="1" min="0.01" />
                  <input id="re-nu" type="number" placeholder="Viscosidad ŒΩ (m¬≤/s)" value="1e-5" min="1e-7" />
                  <button id="calcRe">Calcular</button>
                </label>
                <div id="reResult" class="result"></div>
              </div>
            </div>
          </div>
        </section>

        <!-- DISCRETIZACI√ìN -->
        <section id="discretization" class="chapter">
          <h2>M√©todos de Discretizaci√≥n</h2>
          <div class="chapter-content">
            <div class="chapter-grid">
              <div class="chapter-card">
                <h3>¬øQu√© es discretizar?</h3>
                <p>Transformar ecuaciones continuas (PDEs) en sistemas algebraicos en nodos/celdas discretos:</p>
                <ul>
                  <li><strong>Espacio:</strong> Dividir dominio en malla (elementos finitos, vol√∫menes finitos)</li>
                  <li><strong>Tiempo:</strong> Avanzar soluci√≥n en pasos Œît</li>
                  <li><strong>Variables:</strong> œÜ(x,t) ‚Üí œÜ·µ¢‚Åø (valores en nodos)</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Visualizador de Stencils</h3>
                <p>Plantillas de discretizaci√≥n por diferencias finitas:</p>
                <div class="stencil-mini">
                  <canvas id="stencil3Mini" style="width:100%;height:100px;background:rgba(255,255,255,0.02);border-radius:4px;"></canvas>
                  <small>Central 3-point (2¬∫ orden)</small>
                </div>
              </div>

              <div class="chapter-card">
                <h3>N√∫mero de P√©clet</h3>
                <p>Determina esquema √≥ptimo (advecci√≥n dominante vs difusi√≥n):</p>
                <label>Pe = u¬∑Œîx/Œ±:
                  <input id="pe-u" type="number" placeholder="u (m/s)" value="1" min="0.01" />
                  <input id="pe-dx" type="number" placeholder="Œîx (m)" value="0.01" min="0.001" />
                  <input id="pe-alpha" type="number" placeholder="Œ± (m¬≤/s)" value="1e-5" min="1e-7" />
                  <button id="calcPe">Calcular</button>
                </label>
                <div id="peResult" class="result"></div>
              </div>

              <div class="chapter-card">
                <h3>Simulador 1D: Advecci√≥n-Difusi√≥n</h3>
                <p>Observa c√≥mo el fluido transporta (advecciona) y difunde una perturbaci√≥n:</p>
                <div class="sim-controls-mini">
                  <label>u: <input id="sim-u" type="range" min="0" max="2" step="0.1" value="0.5" /></label>
                  <label>Œ±: <input id="sim-alpha" type="range" min="0" max="0.1" step="0.01" value="0.02" /></label>
                  <button id="simStart">Iniciar</button>
                  <button id="simReset">Reiniciar</button>
                </div>
                <canvas id="sim1dCanvas" style="width:100%;height:150px;background:rgba(5,8,16,0.4);border-radius:4px;margin-top:8px;"></canvas>
              </div>
            </div>
          </div>
        </section>

        <!-- INTEGRACI√ìN TEMPORAL -->
        <section id="timeint" class="chapter">
          <h2>Integraci√≥n Temporal ‚Äî Expl√≠cito vs Impl√≠cito</h2>
          <div class="chapter-content">
            <div class="chapter-grid">
              <div class="chapter-card" style="grid-column:span 2;">
                <h3>üî• Simulador R√°pido: Evoluci√≥n en Tiempo Real</h3>
                <p>Elige una funci√≥n inicial, ajusta los par√°metros y observa c√≥mo evoluciona:</p>
                <div class="sim-controls" style="background:rgba(255,100,0,0.06); padding:12px; border-radius:6px; margin:10px 0;">
                  <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:10px;">
                    <div>
                      <label><strong>Funci√≥n Inicial:</strong></label>
                      <select id="simpl-init-func" style="width:100%; padding:6px; margin-top:4px; border-radius:4px; border:1px solid rgba(255,255,255,0.2); background:rgba(5,8,16,0.6); color:#fff;">
                        <option value="gaussian">Gaussiana (campana)</option>
                        <option value="square">Cuadrada (pulso)</option>
                        <option value="ramp">Rampa</option>
                        <option value="sine">Seno</option>
                      </select>
                    </div>
                    <div>
                      <label><strong>Amplitud:</strong></label>
                      <input id="simpl-amplitude" type="number" step="0.1" value="1" min="0.1" style="width:100%; padding:6px; margin-top:4px; border-radius:4px; border:1px solid rgba(255,255,255,0.2); background:rgba(5,8,16,0.6); color:#fff;"/>
                    </div>
                  </div>
                  <div style="display:grid; grid-template-columns:1fr 1fr 1fr; gap:10px; margin-bottom:10px;">
                    <div>
                      <label><strong>Œ± (Difusividad):</strong> <span id="simpl-alpha-val">0.01</span></label>
                      <input id="simpl-alpha-slider" type="range" min="0.001" max="0.1" step="0.001" value="0.01" style="width:100%; margin-top:4px;"/>
                    </div>
                    <div>
                      <label><strong>Œît (Paso tiempo):</strong> <span id="simpl-dt-val">0.0003</span></label>
                      <input id="simpl-dt-slider" type="range" min="0.0001" max="0.001" step="0.00001" value="0.0003" style="width:100%; margin-top:4px;"/>
                    </div>
                    <div>
                      <label><strong>Malla (nx):</strong> <span id="simpl-nx-val">100</span></label>
                      <input id="simpl-nx-slider" type="range" min="50" max="300" step="10" value="100" style="width:100%; margin-top:4px;"/>
                    </div>
                  </div>
                  <div style="display:flex; gap:8px; margin-top:10px;">
                    <button id="simpl-start" style="flex:1; padding:10px; background:var(--accent2); border:none; border-radius:4px; color:#fff; font-weight:600; cursor:pointer;">‚ñ∂ Ejecutar</button>
                    <button id="simpl-reset" style="flex:1; padding:10px; background:rgba(255,255,255,0.1); border:1px solid rgba(255,255,255,0.2); border-radius:4px; color:#fff; font-weight:600; cursor:pointer;">‚Üª Reiniciar</button>
                  </div>
                  <div id="simpl-info" style="margin-top:10px; padding:8px; border-radius:4px; background:rgba(255,255,255,0.05); color:var(--muted); font-size:12px;"></div>
                </div>
                <canvas id="simpl-canvas" style="width:100%; height:250px; background:rgba(5,8,16,0.35); border-radius:4px; margin-top:10px; border:2px solid rgba(255,100,0,0.2);"></canvas>
              </div>

              <div class="chapter-card">
                <h3>Animaci√≥n del M√©todo Euler Expl√≠cito</h3>
                <p>Visualiza c√≥mo el m√©todo Euler avanza la soluci√≥n paso a paso:</p>
                <div style="background:rgba(255,100,0,0.08); padding:12px; border-radius:6px; margin:10px 0;">
                  <p style="margin:0 0 8px; font-size:14px;"><strong>Paso n:</strong> Conocemos T<sub>i</sub><sup>n</sup></p>
                  <p style="margin:0 0 8px; font-size:14px;"><strong>C√°lculo:</strong> T<sub>i</sub><sup>n+1</sup> = T<sub>i</sub><sup>n</sup> + r¬∑(T<sub>i+1</sub><sup>n</sup> - 2T<sub>i</sub><sup>n</sup> + T<sub>i-1</sub><sup>n</sup>)</p>
                  <p style="margin:0; font-size:14px;"><strong>Resultado:</strong> Obtenemos T<sub>i</sub><sup>n+1</sup> en el paso siguiente</p>
                </div>
                <canvas id="eulerAnimCanvas" style="width:100%; height:200px; background:rgba(5,8,16,0.35); border-radius:4px; margin-top:8px; border:2px solid rgba(255,100,0,0.3);"></canvas>
                <div style="margin-top:8px; display:flex; gap:8px;">
                  <button id="eulerPlayBtn" style="flex:1; padding:8px; background:var(--accent2); border:none; border-radius:4px; color:#fff; font-weight:600; cursor:pointer;">‚ñ∂ Animar Euler</button>
                </div>
              </div>

              <div class="chapter-card">
                <h3>Ecuaci√≥n de Difusi√≥n de Temperatura</h3>
                <p><strong>Ecuaci√≥n continua:</strong></p>
                <code>‚àÇT/‚àÇt = Œ± ‚àÇ¬≤T/‚àÇx¬≤</code>
                <hr style="border:0; border-top:1px solid rgba(255,255,255,0.1); margin:10px 0;">
                <p><strong>Discretizaci√≥n Expl√≠cita (Forward Euler):</strong></p>
                <code style="font-size:0.85em; display:block; background:rgba(255,100,0,0.08); padding:8px; border-radius:4px; margin:8px 0;">T<sub>i</sub><sup>n+1</sup> = T<sub>i</sub><sup>n</sup> + r(T<sub>i+1</sub><sup>n</sup> - 2T<sub>i</sub><sup>n</sup> + T<sub>i-1</sub><sup>n</sup>)</code>
                <small>donde r = Œ±¬∑Œît/(Œîx)¬≤ (n√∫mero de Courant)</small>
                <hr style="border:0; border-top:1px solid rgba(255,255,255,0.1); margin:10px 0;">
                <p><strong>Discretizaci√≥n Impl√≠cita (Backward Euler):</strong></p>
                <code style="font-size:0.85em; display:block; background:rgba(100,200,255,0.08); padding:8px; border-radius:4px; margin:8px 0;">T<sub>i</sub><sup>n+1</sup> - r(T<sub>i+1</sub><sup>n+1</sup> - 2T<sub>i</sub><sup>n+1</sup> + T<sub>i-1</sub><sup>n+1</sup>) = T<sub>i</sub><sup>n</sup></code>
                <small>Sistema tridiagonal (resuelto con Thomas algorithm)</small>
              </div>

              <div class="chapter-card">
                <h3>Comparaci√≥n en tiempo real</h3>
                <p>Simule ambos esquemas y observe c√≥mo se comportan:</p>
                <div class="sim-controls">
                  <label>Œ±: <input id="ti-alpha" type="number" step="0.001" value="0.02" min="0.0001"/></label>
                  <label>Œîx (nx): <input id="ti-nx" type="number" step="1" value="100" min="20" max="500"/></label>
                  <label>Œît: <input id="ti-dt" type="number" step="0.0001" value="0.0005" min="1e-6"/></label>
                  <label>Substeps/frame: <input id="ti-substeps" type="number" step="1" value="1" min="1" max="10"/></label>
                  <div style="margin-top:8px;display:flex;gap:8px;flex-wrap:wrap;">
                    <button id="ti-start">Iniciar/Pausar</button>
                    <button id="ti-reset">Reiniciar</button>
                    <label style="align-items:center;display:flex;gap:6px;"><input id="ti-runExplicit" type="checkbox" checked/> Expl√≠cito</label>
                    <label style="align-items:center;display:flex;gap:6px;"><input id="ti-runImplicit" type="checkbox" checked/> Impl√≠cito</label>
                  </div>
                  <div id="ti-warning" style="margin-top:8px; padding:8px; border-radius:4px; background:rgba(255,100,100,0.1); border:1px solid rgba(255,100,100,0.3); color:#ffb4b4; font-size:12px; display:none;">
                    ‚ö†Ô∏è <strong>¬°INESTABLE!</strong> El esquema expl√≠cito oscila. Œît es muy grande (r > 0.5). Reduce Œît o aumenta Œîx.
                  </div>
                  <div id="ti-info" style="margin-top:8px;color:var(--muted);font-size:13px;"></div>
                </div>
              </div>

              <div class="chapter-card" style="grid-column:span 2;">
                <h3>Visualizaci√≥n lado a lado</h3>
                <div style="display:flex;gap:12px;align-items:flex-start;">
                  <div style="flex:1">
                    <strong>Expl√≠cito (Forward Euler)</strong>
                    <canvas id="ti-explicit-canvas" style="width:100%;height:140px;background:rgba(5,8,16,0.35);border-radius:4px;margin-top:8px;"></canvas>
                    <small id="ti-expStatus" style="color:var(--muted); font-size:11px; margin-top:4px;">Status: listo</small>
                  </div>
                  <div style="flex:1">
                    <strong>Impl√≠cito (Backward Euler) - Siempre Estable</strong>
                    <canvas id="ti-implicit-canvas" style="width:100%;height:140px;background:rgba(5,8,16,0.35);border-radius:4px;margin-top:8px;"></canvas>
                    <small id="ti-impStatus" style="color:var(--muted); font-size:11px; margin-top:4px;">Status: listo</small>
                  </div>
                </div>
                <div style="margin-top:10px">
                  <strong>Error (L2) vs tiempo</strong>
                  <canvas id="ti-err-canvas" style="width:100%;height:120px;background:rgba(255,255,255,0.02);border-radius:4px;margin-top:8px;"></canvas>
                </div>
              </div>

              <div class="chapter-card">
                <h3>¬øQu√© son las oscilaciones?</h3>
                <p>Cuando Œît es muy grande en el esquema expl√≠cito, la soluci√≥n comienza a oscilar de forma no-f√≠sica. El impl√≠cito siempre es estable (sin oscilaciones).</p>
                <ul>
                  <li><strong>r ‚â§ 0.5:</strong> ‚úì Expl√≠cito estable (sin oscilaciones)</li>
                  <li><strong>r > 0.5:</strong> ‚úó Expl√≠cito inestable (oscila wildly)</li>
                  <li><strong>Cualquier r:</strong> ‚úì Impl√≠cito siempre estable</li>
                </ul>
              </div>
            </div>
          </div>
        </section>

        <!-- MALLAS -->
        <section id="meshes" class="chapter">
          <h2>Generaci√≥n de Mallas (Meshing)</h2>
          <div class="chapter-content">
            <div class="chapter-grid">
              <div class="chapter-card">
                <h3>Estructura de Malla</h3>
                <p>La malla es la discretizaci√≥n espacial del dominio:</p>
                <ul>
                  <li><strong>Nodos:</strong> Puntos donde se calculan variables</li>
                  <li><strong>Elementos:</strong> Tri√°ngulos, cuadril√°teros, tetraedros</li>
                  <li><strong>Celdas:</strong> Vol√∫menes de control (m√©todos FV)</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Tipos de Malla</h3>
                <p><strong>Estructurada:</strong> Grilla regular (i,j,k), mejor para geometr√≠as simples</p>
                <p><strong>No estructurada:</strong> Elementos irregulares, flexible para geometr√≠as complejas</p>
                <p><strong>H√≠brida:</strong> Combinaci√≥n, refinada en bordes (capas l√≠mite)</p>
              </div>

              <div class="chapter-card">
                <h3>Refinamiento de Malla</h3>
                <p>Zonas cr√≠ticas necesitan m√°s resoluci√≥n:</p>
                <ul>
                  <li>Bordes de objetos (capas l√≠mite)</li>
                  <li>Zonas de gradiente alto (estelas, v√≥rtices)</li>
                  <li>Interfaces (multifase)</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Calidad de Malla</h3>
                <p>Par√°metros clave:</p>
                <ul>
                  <li><strong>Aspect Ratio:</strong> Relaci√≥n largo/ancho de elementos</li>
                  <li><strong>Skewness:</strong> Deformaci√≥n del elemento (0=ideal, 1=degenera)</li>
                  <li><strong>Crecimiento:</strong> Transici√≥n Œîx gradual entre regiones</li>
                </ul>
              </div>
            </div>
          </div>
        </section>

        <!-- SOLUCIONADORES -->
        <section id="solvers" class="chapter">
          <h2>M√©todos de Soluci√≥n Num√©rica</h2>
          <div class="chapter-content">
            <div class="chapter-grid">
              <div class="chapter-card">
                <h3>M√©todos Temporales</h3>
                <p><strong>Expl√≠cito (Euler Forward):</strong></p>
                <code>y‚Åø‚Å∫¬π = y‚Åø + Œît¬∑f(t‚Åø, y‚Åø)</code>
                <p>R√°pido pero requiere Œît peque√±o (estable si CFL ‚â§ 1)</p>
              </div>

              <div class="chapter-card">
                <h3>Impl√≠citos y Crank-Nicolson</h3>
                <p><strong>Impl√≠cito (Euler Backward):</strong></p>
                <code>y‚Åø‚Å∫¬π = y‚Åø + Œît¬∑f(t‚Åø‚Å∫¬π, y‚Åø‚Å∫¬π)</code>
                <p>M√°s estable; permite Œît grande pero costo computacional mayor</p>
              </div>

              <div class="chapter-card">
                <h3>Runge-Kutta</h3>
                <p>M√∫ltiples etapas intermedias para mejor precisi√≥n:</p>
                <ul>
                  <li>RK2: Orden 2, balance precisi√≥n-costo</li>
                  <li>RK3: Orden 3, muy usado en CFD</li>
                  <li>RK4: Orden 4, m√°s precisi√≥n</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Solvers Lineales</h3>
                <p>Resuelven sistemas Ax = b en cada paso temporal:</p>
                <ul>
                  <li><strong>Directos:</strong> Gauss, LU (exactos, costosos)</li>
                  <li><strong>Iterativos:</strong> GMRES, BiCG (aproximados, r√°pidos)</li>
                  <li><strong>Precondicionadores:</strong> Aceleran convergencia</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Acoplamiento P-V</h3>
                <p>Presi√≥n y velocidad est√°n acopladas (Navier-Stokes):</p>
                <ul>
                  <li><strong>SIMPLE:</strong> Semi-implicit (segregado)</li>
                  <li><strong>SIMPLEC:</strong> Mejorado</li>
                  <li><strong>PISO:</strong> Impl√≠cito (acoplado)</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Criterios de Convergencia</h3>
                <p>¬øCu√°ndo terminar la simulaci√≥n?</p>
                <ul>
                  <li>Residuales < 1e-6 (ecuaciones de momentum)</li>
                  <li>Monitor de funciones (fuerzas, caudal)</li>
                  <li>Energ√≠a numerac√°lculo estabilizada</li>
                </ul>
              </div>
            </div>
          </div>
        </section>

        <!-- SOLUTIONS ALGORITHMS -->
        <section id="solutions" class="chapter">
          <h2>Solutions algorithms</h2>
          <div class="chapter-content">
            <div class="chapter-grid">
              <div class="chapter-card">
                <h3>¬øPor qu√© usar SIMPLE para flujos incompresibles?</h3>
                <p>SIMPLE (Semi-Implicit Method for Pressure-Linked Equations) es un algoritmo segregado que resuelve iterativamente campos de velocidad y presi√≥n en flujos incompresibles. Se usa porque:</p>
                <ul>
                  <li>Transforma el problema acoplado presi√≥n-velocidad en pasos manejables (segregados).</li>
                  <li>Permite usar solvers iterativos eficientes por campo (velocidad y presi√≥n por separado).</li>
                  <li>Es robusto, f√°cil de implementar en mallas no estructuradas y ampliamente probado en ingenier√≠a.</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Diagrama: SIMPLE (flujo)</h3>
                <div style="text-align:center">
                  <svg width="100%" height="160" viewBox="0 0 800 160" preserveAspectRatio="xMidYMid meet">
                    <defs>
                      <marker id="arr" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
                        <path d="M0,0 L6,3 L0,6 z" fill="#00ff88" />
                      </marker>
                    </defs>
                    <rect x="20" y="12" width="150" height="32" rx="6" fill="#001a12" stroke="#00ff88"/>
                    <text x="95" y="33" fill="#dff" font-size="12" text-anchor="middle">Guess pressure p*</text>

                    <rect x="200" y="12" width="150" height="32" rx="6" fill="#001a12" stroke="#00d9ff"/>
                    <text x="275" y="33" fill="#dff" font-size="12" text-anchor="middle">Solve momentum ‚Üí u*</text>

                    <rect x="380" y="12" width="180" height="32" rx="6" fill="#001a12" stroke="#ff006e"/>
                    <text x="470" y="33" fill="#dff" font-size="12" text-anchor="middle">Build pressure correction equation</text>

                    <rect x="600" y="12" width="150" height="32" rx="6" fill="#001a12" stroke="#ffd166"/>
                    <text x="675" y="33" fill="#dff" font-size="12" text-anchor="middle">Solve p' ‚Üí update p, u</text>

                    <line x1="170" y1="28" x2="200" y2="28" stroke="#00ff88" stroke-width="2" marker-end="url(#arr)" />
                    <line x1="350" y1="28" x2="380" y2="28" stroke="#00d9ff" stroke-width="2" marker-end="url(#arr)" />
                    <line x1="560" y1="28" x2="600" y2="28" stroke="#ff006e" stroke-width="2" marker-end="url(#arr)" />

                    <rect x="320" y="80" width="260" height="44" rx="6" fill="#001a12" stroke="#56b6f0"/>
                    <text x="450" y="105" fill="#dff" font-size="12" text-anchor="middle">Check convergence (residuals). If not converged repeat</text>
                    <line x1="470" y1="80" x2="470" y2="64" stroke="#56b6f0" stroke-width="2" marker-end="url(#arr)"/>
                    <line x1="90" y1="64" x2="90" y2="80" stroke="#56b6f0" stroke-width="2" marker-end="url(#arr)"/>
                  </svg>
                </div>
              </div>

              <div class="chapter-card">
                <h3>Diferencias SIMPLE vs Fractional-step</h3>
                <p>Resumen de diferencias:</p>
                <ul>
                  <li><strong>SIMPLE:</strong> m√©todo segregado estacionario que usa correcciones de presi√≥n; adecuado para solucionadores iterativos estacionarios y mallas variadas.</li>
                  <li><strong>Fractional-step / Projection:</strong> normalmente usado en esquemas temporales para acoplar presi√≥n y velocidad avanzando en tiempo: se usa una ecuaci√≥n intermedia para velocidad sin incompressibility y despu√©s se corrige con un paso de presi√≥n (proyecci√≥n) para imponer ‚àá¬∑u=0.</li>
                  <li>Fractional-step es t√≠picamente temporal y expl√≠cito/semimpl√≠cito; SIMPLE suele emplearse en soluciones estacionarias o pseudo-transitoria.</li>
                  <li>SIMPLE construye y resuelve una ecuaci√≥n de correcci√≥n de presi√≥n (segregado); fractional-step resuelve una ecuaci√≥n de Poisson de presi√≥n derivada de la correcci√≥n de velocidad.</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Diagrama: Fractional-step (proyecci√≥n)</h3>
                <div style="text-align:center">
                  <svg width="100%" height="160" viewBox="0 0 800 160" preserveAspectRatio="xMidYMid meet">
                    <defs>
                      <marker id="arr2" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
                        <path d="M0,0 L6,3 L0,6 z" fill="#00d9ff" />
                      </marker>
                    </defs>
                    <rect x="40" y="20" width="160" height="32" rx="6" fill="#08121a" stroke="#00d9ff"/>
                    <text x="120" y="42" fill="#dff" font-size="12" text-anchor="middle">Predictor: solve momentum (u*)</text>

                    <rect x="260" y="20" width="220" height="32" rx="6" fill="#08121a" stroke="#00ff88"/>
                    <text x="370" y="42" fill="#dff" font-size="12" text-anchor="middle">Solve Poisson for pressure (‚àá¬≤p' = ...)</text>

                    <rect x="520" y="20" width="200" height="32" rx="6" fill="#08121a" stroke="#ff006e"/>
                    <text x="620" y="42" fill="#dff" font-size="12" text-anchor="middle">Correct velocity: u^{n+1} = u* - ‚àáp'</text>

                    <line x1="200" y1="36" x2="260" y2="36" stroke="#00d9ff" stroke-width="2" marker-end="url(#arr2)" />
                    <line x1="480" y1="36" x2="520" y2="36" stroke="#00ff88" stroke-width="2" marker-end="url(#arr2)" />
                  </svg>
                </div>
              </div>

              <div class="chapter-card">
                <h3>Linealizaci√≥n</h3>
                <p>La linealizaci√≥n es la aproximaci√≥n de t√©rminos no lineales por expresiones lineales respecto a la variable desconocida dentro de una iteraci√≥n ‚Äî por ejemplo evaluar el t√©rmino convectivo œÅ(u¬∑‚àá)u usando valores conocidos de la iteraci√≥n anterior para convertir la ecuaci√≥n en una forma lineal que pueda resolverse con m√©todos lineales.</p>
              </div>

              <div class="chapter-card">
                <h3>Condici√≥n en presi√≥n para flujos incompresibles</h3>
                <p>Para incompresible se debe imponer que la velocidad resultante sea divergencia-cero (‚àá¬∑u = 0). La presi√≥n act√∫a como multiplicador de Lagrange para imponer esa restricci√≥n. Adem√°s la presi√≥n en problemas incompresibles es √∫nica salvo una constante aditiva (se debe fijar una referencia).</p>
              </div>

              <div class="chapter-card">
                <h3>¬øQu√© es un residual?</h3>
                <p>El residual es la discrepancia al evaluar la ecuaci√≥n discreta con la soluci√≥n aproximada: r = b - A x. Indica cu√°nto queda por resolver. En iterativos se monitoriza para decidir convergencia.</p>
              </div>

              <div class="chapter-card">
                <h3>Or√≠genes y control de residuals</h3>
                <ul>
                  <li>Origenes: discretizaci√≥n (truncation error), condiciones de frontera incompatibles, acoplamiento mal tratado entre ecuaciones, errores de redondeo y solvers inexactos.</li>
                  <li>Control: refinamiento de malla/tiempo, mejores solvers/precondicionadores, pasos de relajaci√≥n (under-relaxation), correcci√≥n consistente de presi√≥n (Rhie‚ÄìChow), y criterios de convergencia estrictos.</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Desacoplamiento potencial entre momentum y presi√≥n</h3>
                <p>Si la presi√≥n y velocidad se resuelven de forma independiente sin una correcci√≥n consistente, la ecuaci√≥n de continuidad puede no satisfacerse, provocando soluciones no f√≠sicas. Ejemplos: esquemas centrales para presi√≥n en mallas colocalizadas pueden producir checkerboarding; usar interpolaci√≥n Rhie‚ÄìChow o mallas staggered evita el problema.</p>
              </div>

              <div class="chapter-card">
                <h3>Origen de "checkerboarding" y prevenci√≥n</h3>
                <p>Checkerboarding es una oscilaci√≥n de presi√≥n/velocidad con patr√≥n alternado (alta-baja) causada por acoplamiento insuficiente entre presi√≥n y velocidad en mallas colocalizadas y esquemas centrados. Prevenci√≥n:</p>
                <ul>
                  <li>Usar malla staggered (centros y caras separadas) ‚Äî elimina el modo nulo.</li>
                  <li>Aplicar interpolaci√≥n Rhie‚ÄìChow en arreglos colocalizados para introducir t√©rminos de amortiguamiento num√©rico consistente.</li>
                  <li>Incrementar acoplamiento o usar solver acoplado (seg√∫n caso).</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Ventajas / Desventajas: Colocado vs Staggered</h3>
                <p><strong>Staggered (desfasado):</strong></p>
                <ul>
                  <li>+ Evita checkerboarding naturalmente.</li>
                  <li>+ Mejor acoplamiento presi√≥n-velocidad en FV.</li>
                  <li>- Implementaci√≥n y manejo de datos m√°s compleja, especialmente en mallas no estructuradas.</li>
                </ul>
                <p><strong>Collocated (colocado):</strong></p>
                <ul>
                  <li>+ Estructura de datos m√°s simple, f√°cil de implementar en mallas arbitrarias.</li>
                  <li>- Requiere t√©cnicas adicionales (Rhie‚ÄìChow, estabilizaci√≥n) para evitar checkerboarding y acoplar correctamente.</li>
                </ul>
              </div>

            </div>
          </div>
        </section>

        <!-- VISUALIZACI√ìN -->
        <section id="visualization" class="chapter">
          <h2>Postproceso y Visualizaci√≥n</h2>
          <div class="chapter-content">
            <div class="chapter-grid">
              <div class="chapter-card">
                <h3>Herramientas de Visualizaci√≥n</h3>
                <ul>
                  <li><strong>ParaView:</strong> C√≥digo abierto, poderoso</li>
                  <li><strong>Tecplot:</strong> Resultados profesionales</li>
                  <li><strong>VisIt:</strong> Cient√≠fico, paralelo</li>
                  <li><strong>Python (Matplotlib, Paraview):</strong> Scripts personalizados</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Tipos de Gr√°ficos</h3>
                <ul>
                  <li><strong>Contornos:</strong> Campos escalares (presi√≥n, T)</li>
                  <li><strong>Vectores:</strong> Campos de velocidad</li>
                  <li><strong>Streamlines:</strong> L√≠neas de corriente</li>
                  <li><strong>Iso-superficies:</strong> Superficies de nivel</li>
                  <li><strong>Gr√°ficos 1D:</strong> Perfiles en cortes</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>An√°lisis de Resultados</h3>
                <p>C√°lculos derivados:</p>
                <ul>
                  <li><strong>Fuerzas:</strong> Drag, lift (integrar presi√≥n, esfuerzo)</li>
                  <li><strong>Vorticidad:</strong> œâ = ‚àá √ó u (rotaci√≥n local)</li>
                  <li><strong>N√∫mero de Mach:</strong> u/c (efectos compresibilidad)</li>
                  <li><strong>N√∫mero Ec:</strong> Viscous dissipation</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Gr√°fico de Convergencia</h3>
                <p>Observa c√≥mo decrece el error con refinamiento de malla (log-log):</p>
                <div style="background:rgba(255,255,255,0.02);padding:8px;border-radius:4px;text-align:center;">
                  <button id="calcConv" style="width:100%;padding:8px;background:var(--accent);border:none;border-radius:4px;color:#000;font-weight:600;cursor:pointer;">Graficar Convergencia</button>
                  <canvas id="convCanvas" style="width:100%;height:150px;margin-top:8px;"></canvas>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- HERRAMIENTAS -->
        <section id="tools" class="chapter">
          <h2>Software y Herramientas CFD</h2>
          <div class="chapter-content">
            <div class="chapter-grid">
              <div class="chapter-card">
                <h3>OpenFOAM</h3>
                <p><strong>C√≥digo Abierto, Libre</strong></p>
                <ul>
                  <li>Solucionador CFD general</li>
                  <li>Excelente para investigaci√≥n</li>
                  <li>Comunidad activa, documentaci√≥n</li>
                  <li>Curva de aprendizaje media-alta</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>SU2</h3>
                <p><strong>Aerodin√°mica + Optimizaci√≥n</strong></p>
                <ul>
                  <li>Especializado en flujo compresible</li>
                  <li>Adjoint para optimizaci√≥n</li>
                  <li>Interfaz Python</li>
                  <li>Gratuito y open-source</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>ANSYS Fluent</h3>
                <p><strong>Comercial, Industrial</strong></p>
                <ul>
                  <li>Amplio rango de f√≠sica</li>
                  <li>Interfaz gr√°fica completa</li>
                  <li>Excellent soporte t√©cnico</li>
                  <li>Licencia cara</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Gmsh</h3>
                <p><strong>Mallado 2D/3D</strong></p>
                <ul>
                  <li>Generador de mallas libre</li>
                  <li>Scripts Python/C++</li>
                  <li>CAD integration</li>
                  <li>Ideal para proyectos educativos</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>ParaView</h3>
                <p><strong>Visualizaci√≥n Cient√≠fica</strong></p>
                <ul>
                  <li>Post-procesamiento poderoso</li>
                  <li>C√≥digo abierto</li>
                  <li>Paralelizaci√≥n</li>
                  <li>Compatible con todos los solucionadores</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Recursos Educativos</h3>
                <p><strong>Para aprender CFD:</strong></p>
                <ul>
                  <li><a href="https://www.cfd-online.com/" target="_blank">CFD Online</a> ‚Äî Foros y tutoriales</li>
                  <li><a href="https://openfoam.com/" target="_blank">OpenFOAM Oficial</a></li>
                  <li><a href="https://su2code.github.io/" target="_blank">SU2 Docs</a></li>
                  <li>Cursos online (Coursera, edX)</li>
                </ul>
              </div>
            </div>
          </div>
        </section>

      </div>
    </main>

    <footer>
      <small>CFD Demo ‚Äî Plataforma Educativa Interactiva para Vercel</small>
    </footer>

    <script src="script.js"></script>
  </body>
</html>