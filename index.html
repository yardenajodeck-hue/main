<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>CFD Demo — Plataforma Educativa</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header>
      <h1>CFD — Plataforma Educativa Interactiva</h1>
      <p>Aprende Dinámica de Fluidos Computacional con herramientas interactivas</p>
    </header>

    <main>
      <!-- BARRA DE CAPÍTULOS -->
      <nav class="chapters-nav">
        <button class="chapter-btn active" data-chapter="intro">Intro</button>
        <button class="chapter-btn" data-chapter="equations">Ecuaciones CFD</button>
        <button class="chapter-btn" data-chapter="discretization">Discretización</button>
        <button class="chapter-btn" data-chapter="timeint">Integración Temporal</button>
        <button class="chapter-btn" data-chapter="meshes">Mallas</button>
        <button class="chapter-btn" data-chapter="solvers">Solucionadores</button>
        <button class="chapter-btn" data-chapter="solutions">Solutions algorithms</button>
        <button class="chapter-btn" data-chapter="visualization">Visualización</button>
        <button class="chapter-btn" data-chapter="tools">Herramientas</button>
      </nav>

      <!-- CONTENIDO POR CAPÍTULO -->
      <div class="chapters-container">

        <!-- INTRO -->
        <section id="intro" class="chapter active">
          <h2>Introducción a CFD</h2>
          <div class="chapter-content">
            <div class="chapter-grid">
              <div class="chapter-card">
                <h3>¿Qué es CFD?</h3>
                <p>CFD (Computational Fluid Dynamics) es la simulación numérica de fluidos. Resuelve ecuaciones de Navier-Stokes usando métodos numéricos en computadoras.</p>
                <ul>
                  <li>Modela flujo de aire, agua, gases</li>
                  <li>Predice campos de velocidad, presión, temperatura</li>
                  <li>Se usa en ingeniería aeroespacial, automoción, energía</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Flujo Interactivo 2D</h3>
                <p>Ajusta parámetros y observa el comportamiento del flujo en tiempo real:</p>
                <div class="controls">
                  <label>Tipo de campo:
                    <select id="fieldType">
                      <option value="vortex">Vórtice</option>
                      <option value="shear">Cizalla</option>
                      <option value="source">Fuente/Sumidero</option>
                    </select>
                  </label>
                  <label>Intensidad:
                    <input id="strength" type="range" min="0" max="4" step="0.01" value="1" />
                  </label>
                  <button id="resetBtn">Reiniciar</button>
                </div>
                <canvas id="flowCanvas" style="width:100%;height:350px;background:rgba(5,8,16,0.4);border-radius:6px;margin-top:8px;"></canvas>
              </div>
            </div>
          </div>
        </section>

        <!-- ECUACIONES CFD -->
        <section id="equations" class="chapter">
          <h2>Ecuaciones de Conservación</h2>
          <div class="chapter-content">
            <div class="chapter-grid">
              <div class="chapter-card">
                <h3>Ecuación de Continuidad (Masa)</h3>
                <p>Expresa la conservación de masa en un volumen de control:</p>
                <code>∂ρ/∂t + ∇·(ρu) = 0</code>
                <p><strong>Significado:</strong> La masa no se crea ni se destruye; lo que entra menos lo que sale equals cambio temporal.</p>
              </div>

              <div class="chapter-card">
                <h3>Ecuaciones de Momentum (Impulso)</h3>
                <p>Describe cómo cambia la velocidad del fluido (2ª ley de Newton):</p>
                <code>∂(ρu)/∂t + ∇·(ρu⊗u) = -∇p + ∇·τ + f</code>
                <p>Relaciona: fuerzas (presión, viscosidad) con aceleración del fluido.</p>
              </div>

              <div class="chapter-card">
                <h3>Ecuación de Energía</h3>
                <p>Conservación de energía total (térmica + cinética):</p>
                <code>∂(ρE)/∂t + ∇·(ρEu) = ∇·(k∇T) + ∇·(τ·u) + f·u + Q</code>
                <p>Incluye: conducción térmica, disipación viscosa, fuentes externas.</p>
              </div>

              <div class="chapter-card">
                <h3>Número de Reynolds</h3>
                <p>Determina si el flujo es laminar o turbulento:</p>
                <label>Calcular Re:
                  <input id="re-u" type="number" placeholder="Velocidad u (m/s)" value="1" min="0.01" />
                  <input id="re-L" type="number" placeholder="Longitud L (m)" value="1" min="0.01" />
                  <input id="re-nu" type="number" placeholder="Viscosidad ν (m²/s)" value="1e-5" min="1e-7" />
                  <button id="calcRe">Calcular</button>
                </label>
                <div id="reResult" class="result"></div>
              </div>
            </div>
          </div>
        </section>

        <!-- DISCRETIZACIÓN -->
        <section id="discretization" class="chapter">
          <h2>Métodos de Discretización</h2>
          <div class="chapter-content">
            <div class="chapter-grid">
              <div class="chapter-card">
                <h3>¿Qué es discretizar?</h3>
                <p>Transformar ecuaciones continuas (PDEs) en sistemas algebraicos en nodos/celdas discretos:</p>
                <ul>
                  <li><strong>Espacio:</strong> Dividir dominio en malla (elementos finitos, volúmenes finitos)</li>
                  <li><strong>Tiempo:</strong> Avanzar solución en pasos Δt</li>
                  <li><strong>Variables:</strong> φ(x,t) → φᵢⁿ (valores en nodos)</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Visualizador de Stencils</h3>
                <p>Plantillas de discretización por diferencias finitas:</p>
                <div class="stencil-mini">
                  <canvas id="stencil3Mini" style="width:100%;height:100px;background:rgba(255,255,255,0.02);border-radius:4px;"></canvas>
                  <small>Central 3-point (2º orden)</small>
                </div>
              </div>

              <div class="chapter-card">
                <h3>Número de Péclet</h3>
                <p>Determina esquema óptimo (advección dominante vs difusión):</p>
                <label>Pe = u·Δx/α:
                  <input id="pe-u" type="number" placeholder="u (m/s)" value="1" min="0.01" />
                  <input id="pe-dx" type="number" placeholder="Δx (m)" value="0.01" min="0.001" />
                  <input id="pe-alpha" type="number" placeholder="α (m²/s)" value="1e-5" min="1e-7" />
                  <button id="calcPe">Calcular</button>
                </label>
                <div id="peResult" class="result"></div>
              </div>

              <div class="chapter-card">
                <h3>Simulador 1D: Advección-Difusión</h3>
                <p>Observa cómo el fluido transporta (advecciona) y difunde una perturbación:</p>
                <div class="sim-controls-mini">
                  <label>u: <input id="sim-u" type="range" min="0" max="2" step="0.1" value="0.5" /></label>
                  <label>α: <input id="sim-alpha" type="range" min="0" max="0.1" step="0.01" value="0.02" /></label>
                  <button id="simStart">Iniciar</button>
                  <button id="simReset">Reiniciar</button>
                </div>
                <canvas id="sim1dCanvas" style="width:100%;height:150px;background:rgba(5,8,16,0.4);border-radius:4px;margin-top:8px;"></canvas>
              </div>
            </div>
          </div>
        </section>

        <!-- INTEGRACIÓN TEMPORAL -->
        <section id="timeint" class="chapter">
          <h2>Integración Temporal — Explícito vs Implícito</h2>
          <div class="chapter-content">
            <div class="chapter-grid">
              <div class="chapter-card">
                <h3>Comparación en tiempo real</h3>
                <p>Simulación de la ecuación de difusión 1D: <code>∂T/∂t = α ∂²T/∂x²</code>. Compare esquema explícito (Forward Euler) y esquema implícito (Backward Euler).</p>
                <div class="sim-controls">
                  <label>α: <input id="ti-alpha" type="number" step="0.001" value="0.02" min="0.0001"/></label>
                  <label>Δx (nx): <input id="ti-nx" type="number" step="1" value="100" min="20" max="500"/></label>
                  <label>Δt: <input id="ti-dt" type="number" step="0.0001" value="0.0005" min="1e-6"/></label>
                  <label>Substeps/frame: <input id="ti-substeps" type="number" step="1" value="1" min="1" max="10"/></label>
                  <div style="margin-top:8px;display:flex;gap:8px;flex-wrap:wrap;">
                    <button id="ti-start">Iniciar/Pausar</button>
                    <button id="ti-reset">Reiniciar</button>
                    <label style="align-items:center;display:flex;gap:6px;"><input id="ti-runExplicit" type="checkbox" checked/> Explícito</label>
                    <label style="align-items:center;display:flex;gap:6px;"><input id="ti-runImplicit" type="checkbox" checked/> Implícito</label>
                  </div>
                  <div id="ti-info" style="margin-top:8px;color:var(--muted);font-size:13px;"></div>
                </div>
              </div>

              <div class="chapter-card" style="grid-column:span 2;">
                <h3>Visualización lado a lado</h3>
                <div style="display:flex;gap:12px;align-items:flex-start;">
                  <div style="flex:1">
                    <strong>Explícito</strong>
                    <canvas id="ti-explicit-canvas" style="width:100%;height:140px;background:rgba(5,8,16,0.35);border-radius:4px;margin-top:8px;"></canvas>
                  </div>
                  <div style="flex:1">
                    <strong>Implícito</strong>
                    <canvas id="ti-implicit-canvas" style="width:100%;height:140px;background:rgba(5,8,16,0.35);border-radius:4px;margin-top:8px;"></canvas>
                  </div>
                </div>
                <div style="margin-top:10px">
                  <strong>Error (L2) vs tiempo</strong>
                  <canvas id="ti-err-canvas" style="width:100%;height:120px;background:rgba(255,255,255,0.02);border-radius:4px;margin-top:8px;"></canvas>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- MALLAS -->
        <section id="meshes" class="chapter">
          <h2>Generación de Mallas (Meshing)</h2>
          <div class="chapter-content">
            <div class="chapter-grid">
              <div class="chapter-card">
                <h3>Estructura de Malla</h3>
                <p>La malla es la discretización espacial del dominio:</p>
                <ul>
                  <li><strong>Nodos:</strong> Puntos donde se calculan variables</li>
                  <li><strong>Elementos:</strong> Triángulos, cuadriláteros, tetraedros</li>
                  <li><strong>Celdas:</strong> Volúmenes de control (métodos FV)</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Tipos de Malla</h3>
                <p><strong>Estructurada:</strong> Grilla regular (i,j,k), mejor para geometrías simples</p>
                <p><strong>No estructurada:</strong> Elementos irregulares, flexible para geometrías complejas</p>
                <p><strong>Híbrida:</strong> Combinación, refinada en bordes (capas límite)</p>
              </div>

              <div class="chapter-card">
                <h3>Refinamiento de Malla</h3>
                <p>Zonas críticas necesitan más resolución:</p>
                <ul>
                  <li>Bordes de objetos (capas límite)</li>
                  <li>Zonas de gradiente alto (estelas, vórtices)</li>
                  <li>Interfaces (multifase)</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Calidad de Malla</h3>
                <p>Parámetros clave:</p>
                <ul>
                  <li><strong>Aspect Ratio:</strong> Relación largo/ancho de elementos</li>
                  <li><strong>Skewness:</strong> Deformación del elemento (0=ideal, 1=degenera)</li>
                  <li><strong>Crecimiento:</strong> Transición Δx gradual entre regiones</li>
                </ul>
              </div>
            </div>
          </div>
        </section>

        <!-- SOLUCIONADORES -->
        <section id="solvers" class="chapter">
          <h2>Métodos de Solución Numérica</h2>
          <div class="chapter-content">
            <div class="chapter-grid">
              <div class="chapter-card">
                <h3>Métodos Temporales</h3>
                <p><strong>Explícito (Euler Forward):</strong></p>
                <code>yⁿ⁺¹ = yⁿ + Δt·f(tⁿ, yⁿ)</code>
                <p>Rápido pero requiere Δt pequeño (estable si CFL ≤ 1)</p>
              </div>

              <div class="chapter-card">
                <h3>Implícitos y Crank-Nicolson</h3>
                <p><strong>Implícito (Euler Backward):</strong></p>
                <code>yⁿ⁺¹ = yⁿ + Δt·f(tⁿ⁺¹, yⁿ⁺¹)</code>
                <p>Más estable; permite Δt grande pero costo computacional mayor</p>
              </div>

              <div class="chapter-card">
                <h3>Runge-Kutta</h3>
                <p>Múltiples etapas intermedias para mejor precisión:</p>
                <ul>
                  <li>RK2: Orden 2, balance precisión-costo</li>
                  <li>RK3: Orden 3, muy usado en CFD</li>
                  <li>RK4: Orden 4, más precisión</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Solvers Lineales</h3>
                <p>Resuelven sistemas Ax = b en cada paso temporal:</p>
                <ul>
                  <li><strong>Directos:</strong> Gauss, LU (exactos, costosos)</li>
                  <li><strong>Iterativos:</strong> GMRES, BiCG (aproximados, rápidos)</li>
                  <li><strong>Precondicionadores:</strong> Aceleran convergencia</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Acoplamiento P-V</h3>
                <p>Presión y velocidad están acopladas (Navier-Stokes):</p>
                <ul>
                  <li><strong>SIMPLE:</strong> Semi-implicit (segregado)</li>
                  <li><strong>SIMPLEC:</strong> Mejorado</li>
                  <li><strong>PISO:</strong> Implícito (acoplado)</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Criterios de Convergencia</h3>
                <p>¿Cuándo terminar la simulación?</p>
                <ul>
                  <li>Residuales < 1e-6 (ecuaciones de momentum)</li>
                  <li>Monitor de funciones (fuerzas, caudal)</li>
                  <li>Energía numeracálculo estabilizada</li>
                </ul>
              </div>
            </div>
          </div>
        </section>

        <!-- SOLUTIONS ALGORITHMS -->
        <section id="solutions" class="chapter">
          <h2>Solutions algorithms</h2>
          <div class="chapter-content">
            <div class="chapter-grid">
              <div class="chapter-card">
                <h3>¿Por qué usar SIMPLE para flujos incompresibles?</h3>
                <p>SIMPLE (Semi-Implicit Method for Pressure-Linked Equations) es un algoritmo segregado que resuelve iterativamente campos de velocidad y presión en flujos incompresibles. Se usa porque:</p>
                <ul>
                  <li>Transforma el problema acoplado presión-velocidad en pasos manejables (segregados).</li>
                  <li>Permite usar solvers iterativos eficientes por campo (velocidad y presión por separado).</li>
                  <li>Es robusto, fácil de implementar en mallas no estructuradas y ampliamente probado en ingeniería.</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Diagrama: SIMPLE (flujo)</h3>
                <div style="text-align:center">
                  <svg width="100%" height="160" viewBox="0 0 800 160" preserveAspectRatio="xMidYMid meet">
                    <defs>
                      <marker id="arr" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
                        <path d="M0,0 L6,3 L0,6 z" fill="#00ff88" />
                      </marker>
                    </defs>
                    <rect x="20" y="12" width="150" height="32" rx="6" fill="#001a12" stroke="#00ff88"/>
                    <text x="95" y="33" fill="#dff" font-size="12" text-anchor="middle">Guess pressure p*</text>

                    <rect x="200" y="12" width="150" height="32" rx="6" fill="#001a12" stroke="#00d9ff"/>
                    <text x="275" y="33" fill="#dff" font-size="12" text-anchor="middle">Solve momentum → u*</text>

                    <rect x="380" y="12" width="180" height="32" rx="6" fill="#001a12" stroke="#ff006e"/>
                    <text x="470" y="33" fill="#dff" font-size="12" text-anchor="middle">Build pressure correction equation</text>

                    <rect x="600" y="12" width="150" height="32" rx="6" fill="#001a12" stroke="#ffd166"/>
                    <text x="675" y="33" fill="#dff" font-size="12" text-anchor="middle">Solve p' → update p, u</text>

                    <line x1="170" y1="28" x2="200" y2="28" stroke="#00ff88" stroke-width="2" marker-end="url(#arr)" />
                    <line x1="350" y1="28" x2="380" y2="28" stroke="#00d9ff" stroke-width="2" marker-end="url(#arr)" />
                    <line x1="560" y1="28" x2="600" y2="28" stroke="#ff006e" stroke-width="2" marker-end="url(#arr)" />

                    <rect x="320" y="80" width="260" height="44" rx="6" fill="#001a12" stroke="#56b6f0"/>
                    <text x="450" y="105" fill="#dff" font-size="12" text-anchor="middle">Check convergence (residuals). If not converged repeat</text>
                    <line x1="470" y1="80" x2="470" y2="64" stroke="#56b6f0" stroke-width="2" marker-end="url(#arr)"/>
                    <line x1="90" y1="64" x2="90" y2="80" stroke="#56b6f0" stroke-width="2" marker-end="url(#arr)"/>
                  </svg>
                </div>
              </div>

              <div class="chapter-card">
                <h3>Diferencias SIMPLE vs Fractional-step</h3>
                <p>Resumen de diferencias:</p>
                <ul>
                  <li><strong>SIMPLE:</strong> método segregado estacionario que usa correcciones de presión; adecuado para solucionadores iterativos estacionarios y mallas variadas.</li>
                  <li><strong>Fractional-step / Projection:</strong> normalmente usado en esquemas temporales para acoplar presión y velocidad avanzando en tiempo: se usa una ecuación intermedia para velocidad sin incompressibility y después se corrige con un paso de presión (proyección) para imponer ∇·u=0.</li>
                  <li>Fractional-step es típicamente temporal y explícito/semimplícito; SIMPLE suele emplearse en soluciones estacionarias o pseudo-transitoria.</li>
                  <li>SIMPLE construye y resuelve una ecuación de corrección de presión (segregado); fractional-step resuelve una ecuación de Poisson de presión derivada de la corrección de velocidad.</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Diagrama: Fractional-step (proyección)</h3>
                <div style="text-align:center">
                  <svg width="100%" height="160" viewBox="0 0 800 160" preserveAspectRatio="xMidYMid meet">
                    <defs>
                      <marker id="arr2" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
                        <path d="M0,0 L6,3 L0,6 z" fill="#00d9ff" />
                      </marker>
                    </defs>
                    <rect x="40" y="20" width="160" height="32" rx="6" fill="#08121a" stroke="#00d9ff"/>
                    <text x="120" y="42" fill="#dff" font-size="12" text-anchor="middle">Predictor: solve momentum (u*)</text>

                    <rect x="260" y="20" width="220" height="32" rx="6" fill="#08121a" stroke="#00ff88"/>
                    <text x="370" y="42" fill="#dff" font-size="12" text-anchor="middle">Solve Poisson for pressure (∇²p' = ...)</text>

                    <rect x="520" y="20" width="200" height="32" rx="6" fill="#08121a" stroke="#ff006e"/>
                    <text x="620" y="42" fill="#dff" font-size="12" text-anchor="middle">Correct velocity: u^{n+1} = u* - ∇p'</text>

                    <line x1="200" y1="36" x2="260" y2="36" stroke="#00d9ff" stroke-width="2" marker-end="url(#arr2)" />
                    <line x1="480" y1="36" x2="520" y2="36" stroke="#00ff88" stroke-width="2" marker-end="url(#arr2)" />
                  </svg>
                </div>
              </div>

              <div class="chapter-card">
                <h3>Linealización</h3>
                <p>La linealización es la aproximación de términos no lineales por expresiones lineales respecto a la variable desconocida dentro de una iteración — por ejemplo evaluar el término convectivo ρ(u·∇)u usando valores conocidos de la iteración anterior para convertir la ecuación en una forma lineal que pueda resolverse con métodos lineales.</p>
              </div>

              <div class="chapter-card">
                <h3>Condición en presión para flujos incompresibles</h3>
                <p>Para incompresible se debe imponer que la velocidad resultante sea divergencia-cero (∇·u = 0). La presión actúa como multiplicador de Lagrange para imponer esa restricción. Además la presión en problemas incompresibles es única salvo una constante aditiva (se debe fijar una referencia).</p>
              </div>

              <div class="chapter-card">
                <h3>¿Qué es un residual?</h3>
                <p>El residual es la discrepancia al evaluar la ecuación discreta con la solución aproximada: r = b - A x. Indica cuánto queda por resolver. En iterativos se monitoriza para decidir convergencia.</p>
              </div>

              <div class="chapter-card">
                <h3>Orígenes y control de residuals</h3>
                <ul>
                  <li>Origenes: discretización (truncation error), condiciones de frontera incompatibles, acoplamiento mal tratado entre ecuaciones, errores de redondeo y solvers inexactos.</li>
                  <li>Control: refinamiento de malla/tiempo, mejores solvers/precondicionadores, pasos de relajación (under-relaxation), corrección consistente de presión (Rhie–Chow), y criterios de convergencia estrictos.</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Desacoplamiento potencial entre momentum y presión</h3>
                <p>Si la presión y velocidad se resuelven de forma independiente sin una corrección consistente, la ecuación de continuidad puede no satisfacerse, provocando soluciones no físicas. Ejemplos: esquemas centrales para presión en mallas colocalizadas pueden producir checkerboarding; usar interpolación Rhie–Chow o mallas staggered evita el problema.</p>
              </div>

              <div class="chapter-card">
                <h3>Origen de "checkerboarding" y prevención</h3>
                <p>Checkerboarding es una oscilación de presión/velocidad con patrón alternado (alta-baja) causada por acoplamiento insuficiente entre presión y velocidad en mallas colocalizadas y esquemas centrados. Prevención:</p>
                <ul>
                  <li>Usar malla staggered (centros y caras separadas) — elimina el modo nulo.</li>
                  <li>Aplicar interpolación Rhie–Chow en arreglos colocalizados para introducir términos de amortiguamiento numérico consistente.</li>
                  <li>Incrementar acoplamiento o usar solver acoplado (según caso).</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Ventajas / Desventajas: Colocado vs Staggered</h3>
                <p><strong>Staggered (desfasado):</strong></p>
                <ul>
                  <li>+ Evita checkerboarding naturalmente.</li>
                  <li>+ Mejor acoplamiento presión-velocidad en FV.</li>
                  <li>- Implementación y manejo de datos más compleja, especialmente en mallas no estructuradas.</li>
                </ul>
                <p><strong>Collocated (colocado):</strong></p>
                <ul>
                  <li>+ Estructura de datos más simple, fácil de implementar en mallas arbitrarias.</li>
                  <li>- Requiere técnicas adicionales (Rhie–Chow, estabilización) para evitar checkerboarding y acoplar correctamente.</li>
                </ul>
              </div>

            </div>
          </div>
        </section>

        <!-- VISUALIZACIÓN -->
        <section id="visualization" class="chapter">
          <h2>Postproceso y Visualización</h2>
          <div class="chapter-content">
            <div class="chapter-grid">
              <div class="chapter-card">
                <h3>Herramientas de Visualización</h3>
                <ul>
                  <li><strong>ParaView:</strong> Código abierto, poderoso</li>
                  <li><strong>Tecplot:</strong> Resultados profesionales</li>
                  <li><strong>VisIt:</strong> Científico, paralelo</li>
                  <li><strong>Python (Matplotlib, Paraview):</strong> Scripts personalizados</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Tipos de Gráficos</h3>
                <ul>
                  <li><strong>Contornos:</strong> Campos escalares (presión, T)</li>
                  <li><strong>Vectores:</strong> Campos de velocidad</li>
                  <li><strong>Streamlines:</strong> Líneas de corriente</li>
                  <li><strong>Iso-superficies:</strong> Superficies de nivel</li>
                  <li><strong>Gráficos 1D:</strong> Perfiles en cortes</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Análisis de Resultados</h3>
                <p>Cálculos derivados:</p>
                <ul>
                  <li><strong>Fuerzas:</strong> Drag, lift (integrar presión, esfuerzo)</li>
                  <li><strong>Vorticidad:</strong> ω = ∇ × u (rotación local)</li>
                  <li><strong>Número de Mach:</strong> u/c (efectos compresibilidad)</li>
                  <li><strong>Número Ec:</strong> Viscous dissipation</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Gráfico de Convergencia</h3>
                <p>Observa cómo decrece el error con refinamiento de malla (log-log):</p>
                <div style="background:rgba(255,255,255,0.02);padding:8px;border-radius:4px;text-align:center;">
                  <button id="calcConv" style="width:100%;padding:8px;background:var(--accent);border:none;border-radius:4px;color:#000;font-weight:600;cursor:pointer;">Graficar Convergencia</button>
                  <canvas id="convCanvas" style="width:100%;height:150px;margin-top:8px;"></canvas>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- HERRAMIENTAS -->
        <section id="tools" class="chapter">
          <h2>Software y Herramientas CFD</h2>
          <div class="chapter-content">
            <div class="chapter-grid">
              <div class="chapter-card">
                <h3>OpenFOAM</h3>
                <p><strong>Código Abierto, Libre</strong></p>
                <ul>
                  <li>Solucionador CFD general</li>
                  <li>Excelente para investigación</li>
                  <li>Comunidad activa, documentación</li>
                  <li>Curva de aprendizaje media-alta</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>SU2</h3>
                <p><strong>Aerodinámica + Optimización</strong></p>
                <ul>
                  <li>Especializado en flujo compresible</li>
                  <li>Adjoint para optimización</li>
                  <li>Interfaz Python</li>
                  <li>Gratuito y open-source</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>ANSYS Fluent</h3>
                <p><strong>Comercial, Industrial</strong></p>
                <ul>
                  <li>Amplio rango de física</li>
                  <li>Interfaz gráfica completa</li>
                  <li>Excellent soporte técnico</li>
                  <li>Licencia cara</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Gmsh</h3>
                <p><strong>Mallado 2D/3D</strong></p>
                <ul>
                  <li>Generador de mallas libre</li>
                  <li>Scripts Python/C++</li>
                  <li>CAD integration</li>
                  <li>Ideal para proyectos educativos</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>ParaView</h3>
                <p><strong>Visualización Científica</strong></p>
                <ul>
                  <li>Post-procesamiento poderoso</li>
                  <li>Código abierto</li>
                  <li>Paralelización</li>
                  <li>Compatible con todos los solucionadores</li>
                </ul>
              </div>

              <div class="chapter-card">
                <h3>Recursos Educativos</h3>
                <p><strong>Para aprender CFD:</strong></p>
                <ul>
                  <li><a href="https://www.cfd-online.com/" target="_blank">CFD Online</a> — Foros y tutoriales</li>
                  <li><a href="https://openfoam.com/" target="_blank">OpenFOAM Oficial</a></li>
                  <li><a href="https://su2code.github.io/" target="_blank">SU2 Docs</a></li>
                  <li>Cursos online (Coursera, edX)</li>
                </ul>
              </div>
            </div>
          </div>
        </section>

      </div>
    </main>

    <footer>
      <small>CFD Demo — Plataforma Educativa Interactiva para Vercel</small>
    </footer>

    <script src="script.js"></script>
  </body>
</html>